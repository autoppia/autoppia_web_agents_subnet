# ============================================================================
# VALIDATOR ENVIRONMENT CONFIGURATION
# ============================================================================
# Copy this file to .env and fill in your actual values.
# DO NOT commit your .env file to version control!
# ============================================================================

# ============================================================================
# VALIDATOR IDENTITY [REQUIRED]
# ============================================================================
VALIDATOR_NAME="Your Validator Name"
VALIDATOR_IMAGE="https://example.com/your-validator-image.png"

# ============================================================================
# IWA CONFIGURATION [REQUIRED for task generation]
# ============================================================================
# The validator uses IWA to generate tasks. These variables are needed by IWA.

LLM_PROVIDER="openai"
# Providers enabled in sandbox gateway (comma-separated). Validator startup will
# fail fast if any enabled provider is missing its API key.
GATEWAY_ALLOWED_PROVIDERS="openai,chutes"

# OpenAI Configuration (if LLM_PROVIDER="openai")
OPENAI_API_KEY="sk-proj-..."
OPENAI_MODEL="gpt-4o-mini"
OPENAI_MAX_TOKENS="10000"
OPENAI_TEMPERATURE="0.7"

# Chutes Configuration (if LLM_PROVIDER="chutes")
# CHUTES_BASE_URL="https://your-username-your-chute.chutes.ai/v1"
# CHUTES_API_KEY="cpk_your_api_key_here"
# CHUTES_MODEL="meta-llama/Llama-3.1-8B-Instruct"
# CHUTES_MAX_TOKENS=2048
# CHUTES_TEMPERATURE=0.7
# CHUTES_USE_BEARER=False


# ============================================================================
# DEMO WEBS CONFIGURATION
# ============================================================================
DEMO_WEBS_ENDPOINT="http://localhost"
DEMO_WEBS_STARTING_PORT=8000

# ============================================================================
# EMAIL REPORTING (Optional)
# ============================================================================
# REPORT_MONITOR_SMTP_HOST="smtp.your-provider.com"
# REPORT_MONITOR_SMTP_PORT=465
# REPORT_MONITOR_SMTP_USERNAME="your-email@domain.com"
# REPORT_MONITOR_SMTP_PASSWORD="your-password"
# REPORT_MONITOR_SMTP_SSL=true
# REPORT_MONITOR_EMAIL_FROM="validator@domain.com"
# REPORT_MONITOR_EMAIL_TO="reports@domain.com"
# REPORT_MONITOR_RUN_CODEX=false

# ============================================================================
# EVALUATION TUNING (Optional)
# ============================================================================
# EARLY_STOP_BEHIND_BEST=true
# BURN_ALL=true  # If true, forces BURN_AMOUNT_PERCENTAGE=1.0 (100% burn)
# Stop when a miner exceeds the task cost cap N times (0 = disabled).
# COST_LIMIT_EXCEED_COUNT=10
# Legacy alias (deprecated):
# COST_LIMIT_EARLY_STOP_STREAK=10
#
# Sandbox debugging (Optional)
# Preserve sandbox agent containers after evaluation so you can inspect:
# - stdout logs: `docker logs <container>`
# - cloned repo: temp dir path printed in validator logs
# Warning: this will accumulate containers and disk usage on the host.
# SANDBOX_KEEP_AGENT_CONTAINERS=true
# If you run with TESTING=true, you can also override explicitly with:
# TEST_SANDBOX_KEEP_AGENT_CONTAINERS=true

# Evaluation resource controls (Optional)
# Only evaluate/top-handshake the top N miners by stake per round (0 = unlimited).
# MAX_MINERS_PER_ROUND_BY_STAKE=10
# Optional anti-sybil anti-dominance caps.
# MAX_MINERS_PER_COLDKEY=1
# MAX_MINERS_PER_REPO=2  # reset each season
# Minimum miner stake (alpha) to be eligible in handshake.
# MIN_MINER_STAKE_TAO=100
# If you run with TESTING=true, you can still set the non-test value above, or
# override it explicitly with:
# TEST_MAX_MINERS_PER_ROUND_BY_STAKE=255
# Minimum number of rounds between evaluations for the same miner (0 = disable).
# EVALUATION_COOLDOWN_ROUNDS=2
# Dynamic, stake+score aware rate limiting (optional).
# USE_DYNAMIC_EVALUATION_COOLDOWN=true
# DYNAMIC_EVALUATION_COOLDOWN_MIN_ROUNDS=2
# DYNAMIC_EVALUATION_COOLDOWN_MAX_ROUNDS=6
# DYNAMIC_EVALUATION_COOLDOWN_STAKE_REFERENCE_ALPHA=10000
# DYNAMIC_EVALUATION_COOLDOWN_STAKE_BONUS=0.70
# DYNAMIC_EVALUATION_COOLDOWN_SCORE_SMOOTH_EPS=1e-6

# Enforce explicit miner code pinning: require URLs like
#   https://github.com/<owner>/<repo>/tree/<branch>
# or
#   https://github.com/<owner>/<repo>/commit/<sha>
REQUIRE_MINER_GITHUB_REF=true
